<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/job_seeker_register.css">
    <title>Skill Sync</title>
</head>
<body>
    <h1>Job Seeker Registration</h1>
    <form id="dataForm">
        <label for="seeker_username">Username:</label>
        <input type="text" id="seeker_username" name="seeker_username" required>
        <label for="seeker_password">Password:</label>
        <input type="password" id="seeker_password" name="seeker_password" required>
        <label for="seeker_first_name">First Name:</label>
        <input type="text" id="first_name" name="seeker_first_name" required>
        <label for="seeker_last_name">Last Name:</label>
        <input type="text" id="last_name" name="seeker_last_name" required>
        <label for="seeker_email_adress">Email:</label>
        <input type="text" id="email" name="seeker_email_adress" required>
        <label for="seeker_city">City:</label>
        <input type="text" id="city" name="seeker_city" required>
        <label for="seeker_country">Country:</label>
        <input type="text" id="Country" name="seeker_country" required>
        

        <button type="button" onclick="submitData()">Register</button>
        
    </form>
    <p id="errorMessage" style="color: red;"></p>
    <p id="okRegister" style="color: green"></p>

    <script>
        function submitData() {
            var form = document.getElementById('dataForm');
            var formData = new FormData(form);

            fetch('http://127.0.0.1:8000/job_seekers/register', {
                method: 'POST',
                body: formData,
            })
            .then(response => {
                if (response.ok) {
                    return response.json();
                } else if (response.status === 409) {
                    throw new Error("Username already exists!");
                } else {
                    throw new Error("Fill all information");
                }
            })
            .then(data => {
                document.getElementById('errorMessage').innerText = ''
                document.getElementById('okRegister').innerText = 'Registration successfully!'
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('errorMessage').innerText = error.message;
                document.getElementById('okRegister').innerText = ''
            });
        }
    </script>
</body>
</html>